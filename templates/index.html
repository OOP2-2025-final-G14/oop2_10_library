<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>å›³æ›¸é¤¨ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </title>
  <link rel="stylesheet" href="{{ url_for('static', filename='base-style.css') }}">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<h1>å›³æ›¸é¤¨ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </h1>

<h2>ğŸ“Š åˆ©ç”¨çŠ¶æ³ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h2>

<h3>å‡ºç‰ˆç¤¾åˆ¥ è²¸å‡ºå›æ•°</h3>
  <div class="chart-container">
      <canvas id="myPieChart"></canvas>
  </div>

  <script>
      // Flaskã‹ã‚‰æ¸¡ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã‚’å—ã‘å–ã‚‹
      // | tojson ã‚’ä½¿ã†ã“ã¨ã§ã€Pythonã®ãƒªã‚¹ãƒˆã‚’JSã®é…åˆ—ã«å¤‰æ›ã—ã¾ã™
      const labels = '{{ labels | tojson }}'.replace(/&quot;/g, '"').slice(1, -1).split(',');
      const data = `{{ data | tojson }}`.replace(/&quot;/g, '"').slice(1, -1).split(',').map(Number);

      // ã‚°ãƒ©ãƒ•ã®æç”»è¨­å®š
      const ctx = document.getElementById('myPieChart').getContext('2d');
      const myPieChart = new Chart(ctx, {
          type: 'pie', // å††ã‚°ãƒ©ãƒ•ã‚’æŒ‡å®š 
          data: {
              labels: labels,
              datasets: [{
                  label: 'ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ',
                  data: data,
                  backgroundColor: [
                      'rgba(255, 99, 132, 0.7)',  // èµ¤
                      'rgba(54, 162, 235, 0.7)',  // é’
                      'rgba(255, 206, 86, 0.7)',  // é»„
                      'rgba(75, 192, 192, 0.7)',  // ç·‘
                      'rgba(153, 102, 255, 0.7)', // ç´«
                  ],
                  borderColor: [
                      'rgba(255, 99, 132, 1)',
                      'rgba(54, 162, 235, 1)',
                      'rgba(255, 206, 86, 1)',
                      'rgba(75, 192, 192, 1)',
                      'rgba(153, 102, 255, 1)',
                  ],
                  borderWidth: 1
              }]
          },
          options: {
              responsive: true,
              plugins: {
                  legend: {
                      position: 'top',
                  },
                  title: {
                      display: true,
                      text: 'å‡ºç‰ˆç¤¾ãƒ©ãƒ³ã‚­ãƒ³ã‚°(ä¸Šä½5ä½)'
                  }
              }
          }
      });
  </script>

<h3>åˆ©ç”¨è€… å¹´ä»£åˆ¥ åˆ©ç”¨ç‡</h3>
<canvas id="ageChart"></canvas>

<h3>æœ¬ã”ã¨ã® è²¸å‡ºå›æ•°ãƒ©ãƒ³ã‚­ãƒ³ã‚°</h3>
<canvas id="bookChart"></canvas>

<hr>

<h2>ğŸ“ ãƒ‡ãƒ¼ã‚¿ç®¡ç†</h2>
<ul>
  <li><a href="{{ url_for('user.list') }}">ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†</a></li>
  <li><a href="{{ url_for('book.list') }}">æœ¬ã®ç™»éŒ²</a></li>
  <li><a href="{{ url_for('borrow.list') }}">æœ¬ã®è²¸ã—å‡ºã—ãƒ»è¿”å´</a></li>
  <li><a href="{{ url_for('publisher.list') }}">å‡ºç‰ˆç¤¾ç®¡ç†</a></li>
</ul>



</body>
</html>
